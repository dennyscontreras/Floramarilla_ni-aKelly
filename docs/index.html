<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Flor amarilla — para ti</title>
<meta name="theme-color" content="#ffd54f">

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">

<style>
  :root{
    --stroke:#242424;
    --petal:#ffea3a;
    --petal2:#ffd54f;
    --center1:#ffd166;
    --center2:#f4a261;
    --stem:#3fa34d;
    --leaf:#58b368;
  }

  body{
    margin:0;
    font-family:'Playfair Display', serif;
    background:
      radial-gradient(1200px 700px at 20% 10%, #fffdf5 0 35%, #fff6d6 35% 60%, #ffe9b6 60% 100%);
    display:flex;
    justify-content:center;
    padding:1.5rem;
  }

  .container{
    display:flex;
    flex-direction:column; /* vertical */
    align-items:center;
    max-width:600px;
  }

  svg{
    display:block;
    width:100%;
    max-width:360px;
    height:auto;
  }

  .msg{
    margin-top:.6rem; /* pegado al tallo */
    font-size:clamp(1.2rem, 4vw, 1.8rem);
    font-weight:700;
    text-align:center;
    line-height:1.4;
    color:#222;
  }
  .soft{font-weight:500; color:#444;}

  .replay{
    border:1.5px solid #00000022;
    background:#fff;
    padding:.3rem .7rem;
    border-radius:10px;
    cursor:pointer;
    font-weight:600;
    box-shadow:0 2px 0 #00000012;
    position:absolute;
    top:1rem;
    right:1rem;
  }

  .sway{animation:sway 6s ease-in-out infinite; transform-origin:50% 100%}
  @keyframes sway{0%,100%{transform:rotate(0deg)}50%{transform:rotate(-2deg)}}
  .pop{animation:pop 700ms ease-out both; transform-origin:50% 50%}
  @keyframes pop{0%{transform:scale(.2);opacity:0}60%{transform:scale(1.1);opacity:1}100%{transform:scale(1)}}
  .sketch{filter:url(#sketch)}
  .drawn{transition:stroke-dashoffset 900ms ease, opacity 600ms ease, fill-opacity 600ms ease}
</style>
</head>
<body>
  <button class="replay" id="replay">▶️ Reiniciar</button>

  <div class="container">
    <!-- Flor -->
    <svg id="svg" viewBox="-350 -420 700 840">
      <defs>
        <filter id="sketch">
          <feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="1" seed="4" result="turb"/>
          <feDisplacementMap in="SourceGraphic" in2="turb" scale="1.2" xChannelSelector="R" yChannelSelector="G"/>
        </filter>
        <radialGradient id="gPetalo" cx="50%" cy="45%" r="65%">
          <stop offset="0%" stop-color="var(--petal)"/>
          <stop offset="70%" stop-color="var(--petal2)"/>
          <stop offset="100%" stop-color="var(--petal2)" stop-opacity=".95"/>
        </radialGradient>
        <radialGradient id="gCentro" cx="40%" cy="35%" r="70%">
          <stop offset="0%" stop-color="var(--center1)"/>
          <stop offset="70%" stop-color="var(--center2)"/>
          <stop offset="100%" stop-color="#c99700"/>
        </radialGradient>
        <path id="petalo" d="M 0,0 C 35,-20 90,-15 120,0 C 140,20 140,60 120,85 C 90,115 35,115 0,90 C -25,70 -25,20 0,0 Z"/>
      </defs>

      <g id="talloGrupo" class="sway sketch">
        <path id="tallo" d="M 0,180 C -10,130 -10,80 0,30 C 10,-30 8,-90 0,-160"
              fill="none" stroke="var(--stem)" stroke-width="16" stroke-linecap="round"/>
        <path id="hoja1" d="M -16,40 c 60,-20 110,10 130,35 c -20,15 -70,35 -130,20 c -15,-20 -10,-40 0,-55 z"
              fill="var(--leaf)" stroke="var(--stroke)" stroke-width="1.2"/>
        <path id="hoja2" d="M 0,90 c -60,-20 -110,10 -130,35 c 20,15 70,35 130,20 c 15,-20 10,-40 0,-55 z"
              fill="var(--leaf)" stroke="var(--stroke)" stroke-width="1.2" transform="scale(-1,1)"/>
      </g>

      <g id="grupo-petalos" class="sketch"></g>

      <g id="centro" class="sketch" opacity="0">
        <circle cx="0" cy="-200" r="66" fill="url(#gCentro)" stroke="var(--stroke)" stroke-width="1.4"/>
        <g id="semillas"></g>
      </g>
    </svg>

    <!-- Mensaje -->
    <div class="msg">
      “Lastimosamente Servientrega no hace envíos de flores, así que esta te llega inmediata por WhatsApp.  
      <span class="soft">Al menos serás medio espectadora jajaja, no sé si una flor virtual cuente, pero aja.</span>”
    </div>
  </div>

<script>
  const grupo=document.getElementById('grupo-petalos');
  const semillas=document.getElementById('semillas');
  const centro=document.getElementById('centro');
  const replay=document.getElementById('replay');
  const wait=(ms)=>new Promise(r=>setTimeout(r,ms));
  function clearChildren(n){while(n.firstChild)n.removeChild(n.firstChild);}

  function drawSeeds(){
    clearChildren(semillas);
    for(let i=0;i<40;i++){
      const r=34*Math.sqrt(Math.random()), t=Math.random()*Math.PI*2;
      const x=r*Math.cos(t), y=r*Math.sin(t)-200;
      const c=document.createElementNS('http://www.w3.org/2000/svg','circle');
      c.setAttribute('cx',x.toFixed(2)); c.setAttribute('cy',y.toFixed(2));
      c.setAttribute('r',(Math.random()*1.2+1).toFixed(2)); c.setAttribute('fill','#00000022');
      semillas.appendChild(c);
    }
  }

  function makePetal(angle,idx,total){
    const g=document.createElementNS('http://www.w3.org/2000/svg','g');
    const rot=angle-90, dx=0,dy=-200;
    g.setAttribute('transform',`translate(${dx},${dy}) rotate(${rot})`);
    const p=document.createElementNS('http://www.w3.org/2000/svg','use');
    p.setAttribute('href','#petalo'); p.setAttribute('fill','url(#gPetalo)');
    p.setAttribute('stroke','#242424'); p.setAttribute('stroke-width','1.4');
    const len=document.getElementById('petalo').getTotalLength?.()||400;
    p.style.strokeDasharray=`${len}`; p.style.strokeDashoffset=`${len}`;
    p.style.fillOpacity=0; p.classList.add('drawn');
    g.appendChild(p); return {g,p};
  }

  async function animate(){
    grupo.innerHTML=''; centro.style.opacity=0;
    for(const id of ['tallo','hoja1','hoja2']){
      const el=document.getElementById(id);
      if(el.tagName==='path'){
        const len=el.getTotalLength();
        el.style.strokeDasharray=`${len}`; el.style.strokeDashoffset=`${len}`;
        el.classList.add('drawn');
        if(id!=='tallo'){el.style.fillOpacity=0;}
        await wait(70); el.style.strokeDashoffset='0';
        if(id!=='tallo'){await wait(300); el.style.fillOpacity=1;}
        await wait(150);
      }
    }
    const total=12, step=360/total;
    for(let i=0;i<total;i++){
      const {g,p}=makePetal(i*step,i,total);
      grupo.appendChild(g); await wait(50);
      p.style.strokeDashoffset='0'; await wait(120);
      p.style.fillOpacity=1; await wait(50);
    }
    drawSeeds(); centro.classList.remove('pop'); void centro.offsetWidth; centro.classList.add('pop'); centro.style.opacity=1;
  }
  replay.addEventListener('click',animate);
  animate();
</script>
</body>
</html>
